!function(c,v,t,i){var o="nivoLightbox",e={effect:"fade",theme:"default",keyboardNav:!0,clickOverlayToClose:!0,onInit:function(){},beforeShowLightbox:function(){},afterShowLightbox:function(t){},beforeHideLightbox:function(){},afterHideLightbox:function(){},onPrev:function(t){},onNext:function(t){},errorMessage:"The requested content cannot be loaded. Please try again later."};function n(t,i){this.el=t,this.$el=c(this.el),this.options=c.extend({},e,i),this._defaults=e,this._name=o,this.init()}n.prototype={init:function(){var o=this;c("html").hasClass("nivo-lightbox-notouch")||c("html").addClass("nivo-lightbox-notouch"),"ontouchstart"in t&&c("html").removeClass("nivo-lightbox-notouch"),this.$el.on("click",function(t){t.preventDefault(),o.showLightbox()}),this.options.keyboardNav&&c("body").off("keyup").on("keyup",function(t){var i=t.keyCode?t.keyCode:t.which;27==i&&o.destructLightbox(),37==i&&c(".nivo-lightbox-prev").trigger("click"),39==i&&c(".nivo-lightbox-next").trigger("click")}),this.options.onInit.call(this)},showLightbox:function(){var o=this;this.options.beforeShowLightbox.call(this);var t=this.constructLightbox();if(t){var e=t.find(".nivo-lightbox-content");if(e){var n=this.$el;if(c("body").addClass("nivo-lightbox-body-effect-"+this.options.effect),this.processContent(e,n),this.$el.attr("data-lightbox-gallery")){o=this;var l=c('[data-lightbox-gallery="'+this.$el.attr("data-lightbox-gallery")+'"]');c(".nivo-lightbox-nav").show(),c(".nivo-lightbox-prev").off("click").on("click",function(t){t.preventDefault();var i=l.index(n);n=l.eq(i-1),c(n).length||(n=l.last()),o.processContent(e,n),o.options.onPrev.call(this,[n])}),c(".nivo-lightbox-next").off("click").on("click",function(t){t.preventDefault();var i=l.index(n);n=l.eq(i+1),c(n).length||(n=l.first()),o.processContent(e,n),o.options.onNext.call(this,[n])})}setTimeout(function(){t.addClass("nivo-lightbox-open"),o.options.afterShowLightbox.call(this,[t])},1)}}},processContent:function(o,t){var i=this,e=t.attr("href");if(o.html("").addClass("nivo-lightbox-loading"),this.isHidpi()&&t.attr("data-lightbox-hidpi")&&(e=t.attr("data-lightbox-hidpi")),null!=e.match(/\.(jpeg|jpg|gif|png)$/i)){var n=c("<img>",{src:e});n.one("load",function(){var t=c('<div class="nivo-lightbox-image" />');t.append(n),o.html(t).removeClass("nivo-lightbox-loading"),t.css({"line-height":c(".nivo-lightbox-content").height()+"px",height:c(".nivo-lightbox-content").height()+"px"}),c(v).resize(function(){t.css({"line-height":c(".nivo-lightbox-content").height()+"px",height:c(".nivo-lightbox-content").height()+"px"})})}).each(function(){this.complete&&c(this).load()}),n.error(function(){var t=c('<div class="nivo-lightbox-error"><p>'+i.options.errorMessage+"</p></div>");o.html(t).removeClass("nivo-lightbox-loading")})}else if(video=e.match(/(youtube|youtu|vimeo)\.(com|be)\/(watch\?v=([\w-]+)|([\w-]+))/)){var l="",h="nivo-lightbox-video";if("youtube"==video[1]&&(l="http://www.youtube.com/v/"+video[4],h="nivo-lightbox-youtube"),"youtu"==video[1]&&(l="http://www.youtube.com/v/"+video[3],h="nivo-lightbox-youtube"),"vimeo"==video[1]&&(l="http://player.vimeo.com/video/"+video[3],h="nivo-lightbox-vimeo"),l){var s=c("<iframe>",{src:l,class:h,frameborder:0,vspace:0,hspace:0,scrolling:"auto"});o.html(s),s.load(function(){o.removeClass("nivo-lightbox-loading")})}}else if("ajax"==t.attr("data-lightbox-type")){i=this;c.ajax({url:e,cache:!1,success:function(t){var i=c('<div class="nivo-lightbox-ajax" />');i.append(t),o.html(i).removeClass("nivo-lightbox-loading"),i.outerHeight()<o.height()&&i.css({position:"relative",top:"50%","margin-top":-i.outerHeight()/2+"px"}),c(v).resize(function(){i.outerHeight()<o.height()&&i.css({position:"relative",top:"50%","margin-top":-i.outerHeight()/2+"px"})})},error:function(){var t=c('<div class="nivo-lightbox-error"><p>'+i.options.errorMessage+"</p></div>");o.html(t).removeClass("nivo-lightbox-loading")}})}else if("#"==e.substring(0,1))if(c(e).length){(a=c('<div class="nivo-lightbox-inline" />')).append(c(e).clone().show()),o.html(a).removeClass("nivo-lightbox-loading"),a.outerHeight()<o.height()&&a.css({position:"relative",top:"50%","margin-top":-a.outerHeight()/2+"px"}),c(v).resize(function(){a.outerHeight()<o.height()&&a.css({position:"relative",top:"50%","margin-top":-a.outerHeight()/2+"px"})})}else{var a=c('<div class="nivo-lightbox-error"><p>'+i.options.errorMessage+"</p></div>");o.html(a).removeClass("nivo-lightbox-loading")}else{s=c("<iframe>",{src:e,class:"nivo-lightbox-item",frameborder:0,vspace:0,hspace:0,scrolling:"auto"});o.html(s),s.load(function(){o.removeClass("nivo-lightbox-loading")})}if(t.attr("title")){var r=c("<span>",{class:"nivo-lightbox-title"});r.text(t.attr("title")),c(".nivo-lightbox-title-wrap").html(r)}else c(".nivo-lightbox-title-wrap").html("")},constructLightbox:function(){if(c(".nivo-lightbox-overlay").length)return c(".nivo-lightbox-overlay");var t=c("<div>",{class:"nivo-lightbox-overlay nivo-lightbox-theme-"+this.options.theme+" nivo-lightbox-effect-"+this.options.effect}),i=c("<div>",{class:"nivo-lightbox-wrap"}),o=c("<div>",{class:"nivo-lightbox-content"}),e=c('<a href="#" class="nivo-lightbox-nav nivo-lightbox-prev">Previous</a><a href="#" class="nivo-lightbox-nav nivo-lightbox-next">Next</a>'),n=c('<a href="#" class="nivo-lightbox-close" title="Close">Close</a>'),l=c("<div>",{class:"nivo-lightbox-title-wrap"});i.append(o),i.append(l),t.append(i),t.append(e),t.append(n),c("body").append(t);var h=this;return h.options.clickOverlayToClose&&t.on("click",function(t){(t.target===this||c(t.target).hasClass("nivo-lightbox-content")||c(t.target).hasClass("nivo-lightbox-image"))&&h.destructLightbox()}),n.on("click",function(t){t.preventDefault(),h.destructLightbox()}),t},destructLightbox:function(){this.options.beforeHideLightbox.call(this),c(".nivo-lightbox-overlay").removeClass("nivo-lightbox-open"),c(".nivo-lightbox-nav").hide(),c("body").removeClass("nivo-lightbox-body-effect-"+this.options.effect);c(".nivo-lightbox-prev").off("click"),c(".nivo-lightbox-next").off("click"),c(".nivo-lightbox-content").empty(),this.options.afterHideLightbox.call(this)},isHidpi:function(){return 1<v.devicePixelRatio||!(!v.matchMedia||!v.matchMedia("(-webkit-min-device-pixel-ratio: 1.5),\t\t\t\t\t\t\t  (min--moz-device-pixel-ratio: 1.5),\t\t\t\t\t\t\t  (-o-min-device-pixel-ratio: 3/2),\t\t\t\t\t\t\t  (min-resolution: 1.5dppx)").matches)}},c.fn[o]=function(t){return this.each(function(){c.data(this,o)||c.data(this,o,new n(this,t))})}}(jQuery,window,document);